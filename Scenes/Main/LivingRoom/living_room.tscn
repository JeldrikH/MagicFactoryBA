[gd_scene load_steps=12 format=3 uid="uid://byn3ew2h6ybu2"]

[ext_resource type="Script" path="res://Scenes/Main/LivingRoom/living_room.gd" id="1_co8es"]
[ext_resource type="Texture2D" uid="uid://larehmxkm3y3" path="res://Sprites/Objects/Buildings/Cauldron.png" id="1_pbxc2"]
[ext_resource type="Script" path="res://Scenes/Main/LivingRoom/cauldron.gd" id="2_dx0ji"]
[ext_resource type="Texture2D" uid="uid://dldkm8qagbeo3" path="res://Sprites/Objects/LivingRoom.png" id="2_y2f80"]
[ext_resource type="Texture2D" uid="uid://d33aykunpyfmk" path="res://Sprites/Objects/Buildings/Cauldron_full.png" id="3_ugxfm"]
[ext_resource type="Texture2D" uid="uid://bv4l8ald5semb" path="res://Sprites/Objects/Table.png" id="7_8umew"]
[ext_resource type="Script" path="res://Scenes/Main/LivingRoom/table.gd" id="7_gdw8r"]
[ext_resource type="Script" path="res://Scenes/Main/LivingRoom/storage_interaction.gd" id="12_gyfdq"]

[sub_resource type="CircleShape2D" id="CircleShape2D_wo8wd"]
radius = 213.53

[sub_resource type="SpriteFrames" id="SpriteFrames_7x3rb"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": ExtResource("3_ugxfm")
}],
"loop": true,
"name": &"Brew",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("1_pbxc2")
}],
"loop": true,
"name": &"Empty",
"speed": 5.0
}]

[sub_resource type="CircleShape2D" id="CircleShape2D_weoqq"]
radius = 170.35

[node name="LivingRoom" type="Node2D"]
script = ExtResource("1_co8es")

[node name="MultiplayerSpawner" type="MultiplayerSpawner" parent="."]
_spawnable_scenes = PackedStringArray("res://Scenes/Main/player.tscn")
spawn_path = NodePath("..")

[node name="Table" type="StaticBody2D" parent="."]
position = Vector2(1215, 1292)
scale = Vector2(2.28, 2.28)
script = ExtResource("7_gdw8r")
metadata/_edit_lock_ = true

[node name="TableHitbox" type="CollisionPolygon2D" parent="Table"]
position = Vector2(-584, -580)
polygon = PackedVector2Array(459, 435, 429.614, 493.596, 431, 583, 583.942, 583, 740, 583, 737.509, 489.649, 700, 434)

[node name="TableSprite" type="Sprite2D" parent="Table"]
position = Vector2(-1, -482)
scale = Vector2(1.182, 1.071)
texture = ExtResource("7_8umew")
metadata/_edit_lock_ = true

[node name="InteractionRange" type="Area2D" parent="Table"]

[node name="InteractionRadius" type="CollisionShape2D" parent="Table/InteractionRange"]
position = Vector2(4.82456, -97.3684)
shape = SubResource("CircleShape2D_wo8wd")
metadata/_edit_lock_ = true

[node name="LivingRoom" type="Sprite2D" parent="."]
position = Vector2(1213, 190)
scale = Vector2(2.6958, 2.44405)
texture = ExtResource("2_y2f80")
metadata/_edit_lock_ = true

[node name="Wall" type="StaticBody2D" parent="LivingRoom"]
position = Vector2(-493.382, -90.0783)
scale = Vector2(0.846281, 0.933454)
metadata/_edit_lock_ = true

[node name="WallCollision" type="CollisionPolygon2D" parent="LivingRoom/Wall"]
polygon = PackedVector2Array(1040, 405, 860, 429, 842, 416, 838, 377, 758, 377, 757, 389, 420, 392, 409, 377, 294, 376, 274, 387, 273, 416, 84, 548, 59, 546, 57, 565, 47.3654, 576.905, 50.872, 644.846, 1187, 644, 1186, 580, 1227, 701, 50, 730, -88, 730, -15, 0, 336, 0, 1146, 1, 1188, 0, 1188, 561, 1188, 581, 1158, 580, 1144, 569, 1148, 490, 1126, 477, 1125, 341, 1042, 336)
metadata/_edit_lock_ = true

[node name="Door" type="Area2D" parent="LivingRoom"]
collision_mask = 2

[node name="DoorCollision" type="CollisionPolygon2D" parent="LivingRoom/Door"]
polygon = PackedVector2Array(388.011, 224.218, 387.64, 286.001, 461.829, 328.144, 458.12, 227.082)

[node name="Cauldron" type="Area2D" parent="."]
position = Vector2(108, 1224)
scale = Vector2(1.824, 1.824)
collision_mask = 2
script = ExtResource("2_dx0ji")

[node name="CauldronSprite" type="AnimatedSprite2D" parent="Cauldron"]
scale = Vector2(0.313477, 0.313477)
sprite_frames = SubResource("SpriteFrames_7x3rb")
animation = &"Brew"
metadata/_edit_lock_ = true

[node name="CauldronCollision" type="CollisionPolygon2D" parent="Cauldron"]
scale = Vector2(0.313477, 0.313477)
polygon = PackedVector2Array(-10, -326.1, -10, -325, -58.1, -323, -73.1, -323, -121.2, -317, -129.2, -317, -180.4, -306, -184.4, -306, -227.4, -290, -230.6, -290, -244.6, -281, -246.8, -281, -260.9, -268, -262.3, -268, -273.3, -244, -274.7, -244, -276, -236.2, -276, -218.6, -272, -207.6, -272, -204.3, -259, -187.4, -259, -185.1, -247.2, -175.3, -252.6, -168.6, -271, -188.8, -271, -190.3, -296.6, -202, -319.4, -202, -330.4, -198, -333.6, -198, -351.6, -186, -354.1, -186, -362.1, -174, -363.4, -174, -368.4, -160, -369.9, -160, -372, -130.1, -372, -120.6, -369, -112.6, -369, -109.4, -359, -94.4, -359, -92.1, -346, -81.1, -346, -79.7, -335, -74.8, -335, -73.4, -305.4, -66.3, -312, -29.2, -312, 13.2, -304, 54.4, -304, 58.4, -290, 91.3, -290, 94.5, -271, 126.4, -271, 128.7, -242, 163.6, -242, 165.9, -210.9, 192.9, -216.1, 202, -217.6, 202, -224, 230.8, -224, 236.3, -220, 249.2, -220, 252.6, -214, 261.6, -214, 264, -196, 277.9, -196, 279.5, -179, 284.4, -179, 286, -163.7, 286, -148.7, 281, -145.4, 281, -136.4, 275, -134.1, 275, -123.1, 263, -121.8, 263, -110.5, 243.3, -66, 253.5, -66, 254.8, -19, 259.8, -19, 261.1, 30.1, 259, 40.2, 259, 77.4, 252, 82.3, 252, 109.3, 243, 109.9, 243, 122, 262.6, 122, 265, 132, 272.9, 132, 274.3, 148, 281.2, 148, 282.6, 161.8, 286, 177.4, 286, 187.4, 282, 190.6, 282, 200.5, 275, 202.9, 275, 212.9, 263, 214.5, 263, 222.5, 237, 224.3, 237, 221, 215.7, 221, 211.5, 210, 192.5, 210, 191.9, 222.7, 181, 224.9, 181, 249.8, 155, 251, 155, 265, 135, 266.2, 135, 293.2, 84, 294.5, 84, 301.5, 61, 302.7, 61, 310.7, 12, 312, 12, 312, -30.2, 306, -63.4, 306, -65.6, 327.3, -72, 330.6, -72, 344.6, -81, 347, -81, 363, -102, 364.5, -102, 371.5, -124, 373.1, -124, 372, -146.1, 372, -152.4, 365, -168.4, 365, -170.8, 351, -186.8, 351, -188.2, 334, -197.3, 334, -198.6, 319.2, -202, 302.7, -202, 290.7, -198, 287.4, -198, 274.5, -190, 272.1, -190, 256, -170.7, 256, -169, 253.6, -167.2, 252.8, -168, 252, -168, 246.2, -175.4, 266.9, -198, 268.4, -198, 277, -221.6, 277, -236.3, 272, -250.5, 272, -253.7, 264, -263.7, 264, -266, 240, -284, 240, -285.4, 194, -302.5, 194, -303.6, 142, -314.7, 142, -315.8, 68, -322.9, 68, -323.9)
metadata/_edit_lock_ = true

[node name="InteractionRange" type="Area2D" parent="Cauldron"]
metadata/_edit_lock_ = true

[node name="InteractionShape" type="CollisionShape2D" parent="Cauldron/InteractionRange"]
position = Vector2(-7.12719, 60.307)
shape = SubResource("CircleShape2D_weoqq")

[node name="BrewTimer" type="Timer" parent="Cauldron"]
wait_time = 3.0

[node name="StorageInteraction" type="Area2D" parent="."]
script = ExtResource("12_gyfdq")

[node name="StorageInteractionShape" type="CollisionPolygon2D" parent="StorageInteraction"]
position = Vector2(1213, 190)
scale = Vector2(2.6958, 2.44405)
polygon = PackedVector2Array(-450.33, -68.7384, -453.669, 342.464, -380.963, 342.464, -331.256, 373.969, -265.969, 327.735, -219.601, 260.633, -260.776, -30.6868)

[node name="EnterRoomPosition" type="Node2D" parent="."]
position = Vector2(2178, 1057)

[connection signal="child_entered_tree" from="." to="." method="_on_child_entered_tree"]
[connection signal="body_entered" from="Table/InteractionRange" to="Table" method="_on_interaction_range_body_entered"]
[connection signal="body_exited" from="Table/InteractionRange" to="Table" method="_on_interaction_range_body_exited"]
[connection signal="body_entered" from="LivingRoom/Door" to="." method="_on_door_body_entered"]
[connection signal="body_entered" from="Cauldron/InteractionRange" to="Cauldron" method="_on_interaction_range_body_entered"]
[connection signal="body_exited" from="Cauldron/InteractionRange" to="Cauldron" method="_on_interaction_range_body_exited"]
[connection signal="timeout" from="Cauldron/BrewTimer" to="Cauldron" method="_on_brew_timer_timeout"]
[connection signal="body_entered" from="StorageInteraction" to="StorageInteraction" method="_on_body_entered"]
[connection signal="body_exited" from="StorageInteraction" to="StorageInteraction" method="_on_body_exited"]
